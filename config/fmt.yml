---
- bin: sjson
  args:
    - --indent
    - "0"
  type: stream
  filetypes:
    - json
  install:
    pip:
      - sortd

- bin: scfg
  type: stream
  filetypes:
    - cfg
  install:
    pip:
      - sortd

- bin: isort
  type: stream
  args:
    - "-"
  filetypes:
    - python
  install:
    pip:
      - isort

- bin: black
  type: stream
  args:
    - "-"
  filetypes:
    - python
  install:
    pip:
      - black

- bin: prettier
  args:
    - --stdin-filepath
    - --
    - "%"
  type: stream
  filetypes:
    - css
    - html
    - javascript
    - javascript.jsx
    - json
    - javascriptreact
    - less
    - markdown
    - scss
    - typescript
    - typescript.tsx
    - typescriptreact
    - xml
    - yaml
  install:
    npm:
      - prettier

- bin: pg_format
  type: stream
  args:
    - --no-rcfile
    - --spaces
    - "2"
    - --comma-start
    - --comma-end
    - --comma-break
  filetypes:
    - sql
  install:
    script:
      env:
        URI: https://github.com/darold/pgFormatter
      body: |-
        set -eu
        set -o pipefail

        LIB="$LIB_DIR/$BIN_NAME"
        if [[ -d "$LIB" ]]
        then
          cd "$LIB" || exit 1
          git pull --recurse-submodules
        else
          git clone --depth=1 --recurse-submodules --shallow-submodules "$URI" "$LIB"
        fi
        ln --symbolic --force "$LIB/$BIN_NAME" "$BIN_PATH"

- bin: rustfmt
  type: stream
  filetypes:
    - rust

- bin: gofmt
  type: stream
  filetypes:
    - go
